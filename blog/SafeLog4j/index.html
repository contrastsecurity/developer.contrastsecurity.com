<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Contrast Developers RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Contrast Developers Atom Feed"><title data-rh="true">SafeLog4j | Contrast Developers</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://developer.contrastsecurity.com/blog/SafeLog4j/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="keywords" content="owasp top 10, web application security solutions, coding security, application security, dynamic application security testing, app security, software security"><meta data-rh="true" property="og:title" content="SafeLog4j | Contrast Developers"><meta data-rh="true" name="description" content="We&#x27;ve recently released SafeLog4j to help teams deal with the recent Log4j issue."><meta data-rh="true" property="og:description" content="We&#x27;ve recently released SafeLog4j to help teams deal with the recent Log4j issue."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-12-17T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="java"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developer.contrastsecurity.com/blog/SafeLog4j/"><link data-rh="true" rel="alternate" href="https://developer.contrastsecurity.com/blog/SafeLog4j/" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.contrastsecurity.com/blog/SafeLog4j/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.4b327040.css">
<link rel="preload" href="/assets/js/runtime~main.e275afba.js" as="script">
<link rel="preload" href="/assets/js/main.40f7bbbd.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2 navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/contrast-logo.png" alt="Contrast" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/contrast-logo-dark.png" alt="Contrast" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Products</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/learn/getting-started/contrast-cli/">Contrast CLI</a></li><li><a href="https://www.contrastsecurity.com/platform" target="_blank" rel="noopener noreferrer" class="dropdown__link">Contrast Platform</a></li></ul></div><a href="https://www.contrastsecurity.com/upcoming-events" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Events</a><a class="navbar__item navbar__link" href="/learn/">Learn</a><a href="https://www.contrastsecurity.com/security-influencers" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/contrastsecurity" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/Kotlin Agent/">Securing Server-Side Kotlin</a></li><li class="sidebarItem_CF0Q"><a aria-current="page" class="sidebarItemLink_miNk sidebarItemLinkActive_RRTD" href="/blog/SafeLog4j/">SafeLog4j</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/Finding Log4j2/">Finding Log4j2 Vulnerabilities</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/Scala Support - Dec 2021/">Scaling to Scala</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/blog/EU &amp; UK Cloud/">Extending our EU/UK Presence</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">SafeLog4j</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2021-12-17T00:00:00.000Z" itemprop="datePublished">December 17, 2021</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><span class="avatar__photo-link avatar__photo"><img class="image_o0gy" src="https://github.com/erikcostlow.png" alt="Erik Costlow"></span><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Erik Costlow</span></div><small class="avatar__subtitle" itemprop="description">DevRel</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>We&#x27;ve recently released <a href="https://github.com/Contrast-Security-OSS/safelog4j" target="_blank" rel="noopener noreferrer">SafeLog4j</a> to help teams deal with the recent Log4j issue.</p><p>The tool is designed to help teams deal with the emergency and obtain time to patch applications and update to the secure version of log4j (currently 2.17.0 at time of writing). SafeLog4j uses an instrumentation-based approach similar to Contrast Assess and Protect but for a single purpose. SafeLog4j is available under an Apache 2 license and can be used by anyone, without an obligation to buy anything or even fill anything out.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="why-safelog4j-is-necessary">Why SafeLog4j is necessary<a class="hash-link" href="#why-safelog4j-is-necessary" title="Direct link to heading">​</a></h2><p>Many teams dealing with software are unable to locate which applications use log4j, and then to deal with them:</p><ul><li>log4j could be buried in a fat jar, war, or ear</li><li>log4j could be shaded in another jar</li><li>log4j could be included in the appserver, not the code repo</li><li>log4j could be part of dynamically loaded code or plugin</li><li>log4j could be many different versions with different classloaders in a single app</li><li>log4j could be masked by use of slf4j or other layers</li><li>log4j could be renamed, recompiled, or otherwise changed</li></ul><p>Many approaches about finding log4j applications over the network are insufficient because they perform HTTP requests, which ignore the fact that many applications that use log4j are not web applications.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="how-safelog4j-works">How SafeLog4j works<a class="hash-link" href="#how-safelog4j-works" title="Direct link to heading">​</a></h2><p>The common response to the Log4Shell vulnerability was puzzled curiousity about why Log4j was executing any code at all, when its job is simply to write data to a log or file. SafeLog4J simply disables the <a href="/blog/learn/guides/learn-devsec/development/java/jndi.md/">JNDI processing</a> engine that was used to load the remote code. Other logging activities proceed as normal. Security teams can still detect attacks because attack payloads are logged as plain text and not executed.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="respect-to-the-aws-corretto-team">Respect to the AWS Corretto Team<a class="hash-link" href="#respect-to-the-aws-corretto-team" title="Direct link to heading">​</a></h2><p>I would like to extend respect to the AWS Corretto team, who used a <a href="https://github.com/corretto/hotpatch-for-apache-log4j2" target="_blank" rel="noopener noreferrer">similar patching approach</a>. When AWS performed their <a href="https://aws.amazon.com/blogs/opensource/hotpatch-for-apache-log4j/" target="_blank" rel="noopener noreferrer">rapid response work</a>, they used an instrumentation-based approach to the issue. Although they own a WAF, network-based defenses are the incorrect tier for this type of issue.</p><p>Log4Shell is the first major vulnerability I&#x27;m aware of where instrumentation was used as the primary defense, and that&#x27;s really cool.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/java/">java</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/contrastsecurity/developer.contrastsecurity.com/blob/master/blog/blog/2021-12-17.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/Kotlin Agent/"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Securing Server-Side Kotlin</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/Finding Log4j2/"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Finding Log4j2 Vulnerabilities</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-safelog4j-is-necessary" class="table-of-contents__link toc-highlight">Why SafeLog4j is necessary</a></li><li><a href="#how-safelog4j-works" class="table-of-contents__link toc-highlight">How SafeLog4j works</a></li><li><a href="#respect-to-the-aws-corretto-team" class="table-of-contents__link toc-highlight">Respect to the AWS Corretto Team</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Navigation</div><ul class="footer__items"><li class="footer__item"><a href="https://www.contrastsecurity.com/upcoming-events" target="_blank" rel="noopener noreferrer" class="footer__link-item">Events</a></li><li class="footer__item"><a class="footer__link-item" href="/learn/">Learn</a></li><li class="footer__item"><a href="https://www.contrastsecurity.com/security-influencers" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items"><li class="footer__item"><a href="https://www.contrastsecurity.com/about-us" target="_blank" rel="noopener noreferrer" class="footer__link-item">About Us</a></li><li class="footer__item"><a href="https://www.contrastsecurity.com/careers" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers</a></li><li class="footer__item"><a href="https://www.contrastsecurity.com/enduser-terms-0317a" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></li><li class="footer__item"><a href="https://www.contrastsecurity.com/privacy-matters" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Matters</a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/contrastsec" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/contrast-security" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://www.facebook.com/contrastsec/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://github.com/contrastsecurity" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Contrast Security.</div></div></div></footer><script id="hs-script-loader" async="" defer="" src="//js.hs-scripts.com/203759.js"></script></div>
<script src="/assets/js/runtime~main.e275afba.js"></script>
<script src="/assets/js/main.40f7bbbd.js"></script>
</body>
</html>